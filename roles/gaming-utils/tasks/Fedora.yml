---

- name: Install gaming packages
  dnf: 
    name: "{{ packages | selectattr('dnf', 'defined') | map(attribute='dnf') | list }}"
    state: present
  tags:
    - dnf
    - download
    - packages
  become: true

- name: Install gaming flatpaks
  flatpak: 
    name: "{{ item }}"
    state: present
  with_items: "{{ packages | selectattr('flatpak', 'defined') | map(attribute='flatpak') | list }}"
  tags:
    - flatpak
    - download
    - packages
  become: true
